@require '@yozora/react-code-editor/src/style.styl'
@require '@yozora/react-code-embed/src/style.styl'
@require '@yozora/react-common-copy-button/src/style.styl'
@require '@yozora/react-common-light-buttons/src/style.styl'

.yozora-code-live
  display: flex
  flex-direction: column
  justify-content: flex-start
  border: 1px solid #d3d3d3
  caret-color: $code-color-caret

  ::selection
    background: $code-bg-selection
  > .yozora-code-live__toolbar
    flex: 0 0 auto
    position: relative
    display: flex
    align-items: center
    height: 2rem
    width: 100%
    border-bottom: 1px solid $code-color-border
    background: $code-bg-primary
    cursor: default

    .yozora-code-live__title
      margin-left: 1rem
      font-family: $heading-font-family
      font-size: 0.9em
      color: $code-color-title
      user-select: none
  > .yozora-code-live__main
    flex: 1 1 auto
    // To avoid the main container overflow at the y-axis, flex-basis will never
    // be shrink shorter less than the min-height (the default value of
    // min-height is *auto*).
    // By the way, set *height: 0px;* also works.
    min-height: 0
    display: flex
    flex-direction: row
    align-items: stretch

    &.yozora-code-live__main--vertical
      flex-direction: column

      > .yozora-code-live__editor
        flex: 0 1 auto
      > .yozora-code-live__previewer
        flex: 1 0 auto
    > .yozora-code-live__editor
      flex: 1 1 0%
      position: relative
      box-sizing: border-box
      overflow: auto
      padding: 0
      border-bottom: 1px solid $code-color-border
      margin: 0
      font-family: $code-font-family
      font-size: $code-font-size
      background: $code-bg-primary

      ::selection
        background: $code-bg-selection
      .yozora-code-editor
        border: none
        border-radius: 0
    > .yozora-code-live__previewer
      flex: 1 1 0%
      box-sizing: border-box
      overflow: auto
      display: block
      padding: 0
      margin: 0
      color: #000
      background: $code-live-previewer-bg

      &.yozora-code-live__previewer--center
        > .yozora-code-embed
          min-height: 100%
          display: flex
          align-items: center
          justify-content: center
.yozora-code-live__copy-button
  position: absolute
  right: 1rem
  visibility: hidden
  opacity: 0
  transition: opacity 0.2s ease-in-out
  background: $code-bg-primary
  user-select: none
.yozora-code-live
  &:hover
    .yozora-code-live__copy-button
      visibility: visible
      opacity: 1
// Adaptive smaller screen.
+mx-screen-xs()
  .yozora-code-live
    border: none
    border-radius: 5px
    box-shadow: rgba(30, 30, 30, 73%) 0 2px 10px
    overflow: hidden

    .yozora-code-highlighter__linenos,
    .yozora-code-editor__textarea-linenos
      display: none
      visibility: hidden
